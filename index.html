<html>
  <head>
    <title>hCaptcha Demo</title>
    <script src="https://js.hcaptcha.com/1/api.js" type="text/javascript" async defer></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="appleid-signin-client-id" content="[CLIENT
    <meta name="appleid-signin-scope" content="[SCOPES]">
    <meta name="appleid-signin-redirect-uri" content="[RED]">
    <meta name="appleid-signin-state" content="[STATE]">
    <meta name="appleid-signin-nonce" content="[NONCE]">
    <meta name="appleid-signin-use-popup" content="false">
  </head>
  <body style="background-color:black">
    <script>const express = require('express');
const Redis = require('ioredis');
const app = express();

const redis = new Redis();

app.use(express.json());

const createRateLimiter = () => {
  const RATE_LIMIT = 10000; // Max submissions allowed per minute
  const TIME_WINDOW = 60;   // Time window in seconds

  return async (req, res) => {
    try {
      const currentTime = Math.floor(Date.now() / 1000);
      const key = `global_submissions:${Math.floor(currentTime / TIME_WINDOW)}`;

      const currentCount = await redis.incr(key);

      if (currentCount === 1) {
        await redis.expire(key, TIME_WINDOW);
      }

      if (currentCount > RATE_LIMIT) {
        return res.status(429).json({ error: 'Global rate limit exceeded. Try again later.' });
      }

      res.json({ success: 'Form submitted successfully' });
    } catch (error) {
      console.error('Error handling submission:', error);
      res.status(500).json({ error: 'Internal server error' });
    }
  };
};

app.post('/submit', createRateLimiter());

app.listen(3000, () => {
  console.log('Server is running on port 3000');
});
</script>
    <center>
<script type="text/javascript" src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
<div style="inline-size:30%" id="appleid-signin" data-color="black" data-border="true" data-type="sign in"></div>
<meta name="google-signin-client_id" content="4182925335-jekgb9poejva537rjeesgcnlss4c5ucr.apps.googleusercontent.com">
<div class="g-signin2" data-onsuccess="onSignIn"></div>
<h2>Sign up</h2>
<form action="" method="POST">
  <input type="text" name="email" placeholder="Email" />
  <br />
  <input type="password" name="password" placeholder="Password" />
  <div class="h-captcha" data-sitekey="4d788ef2-da48-42b4-8e6e-c09eceaec1b6" data-theme="dark"></div>
  <br />
  <input type="submit" value="Submit" />
</form> 
  </center>

  </body>
</html>
